@startuml
/' CLASSES DEFINITION '/

interface Card {
	- int victory_points
}

class Deck {
	- int max_dimension
	- Queue<Card> cards
	+ Card getTopCard()
	+ Card peekTopCard()
	+ void addCardToTop(Card new_card)
}

class DevelopmentCard {
	- Production production
	- Resource[] cost
	- CardLevel level
	+ Resource[] useCard(Resource[] resources_input)
	+ boolean meetRequirements(CardLevel level_to_test)
}

class CardLevel {
	- int level
	- DevelopmentCardsColor color
}

class DevelopmentCardsOnTable {
	- Deck[][] development_card_decks
	+ DevelopmentCard[][] getTopCards()
	+ void getFromDeck(DevelopmentCard chosen_card)
}

class Production {
	- Resource[] required_resources
	- Resource[] produced_resources
	+ Resource[] activateProduction(Resources[] cost)
}

class ProductionBase {
	+ void setRequirements(Resource[] new_requirements)
	+ void setProducts(Resource new_product)
}

class LeaderCard {
	- LeaderAbility ability
	- CardLevel[] requirements
	- boolean activated
	+ boolean isActive()
	+ void activateLeaderCard()
} 

interface LeaderAbility

class ProductionAbility {
	+ void setProducts(Resource new_product)
}

class DiscountAbility {
	- Resource discounted_resource
}

class ExtraSpaceAbility {
	- Resource resource_type
	- Resource[] store_resources
	+ void putResource(Resource new_resource)
	+ Resource[] peekResources()
	+ Resource getResource()
}

class WhiteMarblesAbility {
	- Resource resource_type
}

interface Resource {
	ResourceColor color
}

class Coin {}
class Stone {}
class Servant {}
class Shield {}
class Faith {}

enum ResourceColor {
	YELLOW
	GREY
	PURPLE
	BLUE
	RED
}

enum DevelopmentCardsColor {
	YELLOW
	GREEN
	PURPLE
	BLUE
}

class Market {
	- Market instance
	- Resource[][] market_board
	- Resource free_marble
	- void shiftRow(int index)
	- void shiftColumn(int index)
	- void randomizeMarket()
	+ Market getIstance()
	+ Resource[] getColumn(int index)
	+ Resource[] getRow(int index)
}

enum VaticanReports {
	REPORT1
	REPORT2
	REPORT3
}

class Cell {
	- int position
	- int victory_points
	- VaticanReports report
	- boolean pope_space
	- boolean is_last_cell
}

class Tile {
	- VaticanReports report
	- int victory_points
	- boolean is_active
	+ void activateVaticanReport()
}

class FaithTrack {
	- Cell[] track
	- Tile[] vatican_report_tiles
	- Cell faith_marker
	+ void moveForward(int number_of_times)
}

class FaithTrackSinglePlayer {
	- Cell black_marker
	+ void moveForwardBlackMarker(int number_of_times)
}

class Warehouse {
	- Resource top_resource
	- Resource[] middle_resources
	- Resource[] bottom_resources
	- boolean isPossibleToInsert(Resource[] new_resources)
	- void rearrangeWarehouse(Resource[] new_resources)
	+ void tryToInsert(Resource[] new_resources)
	+ Resource[] getFromWarehouse(Resource resource_type, int quantity)
}

class StrongBox {
	- HashMap<Resource, int> storage
	+ void insertResources(Resource[] new_resources)
	+ Resource[] removeResources(Resource resource_type, int quantity)
}

class DevelopmentCardsSlots {
	- DevelopmentCard[] slots
	+ boolean[] isBuyable(DevelopmentCard card)
	+ void buyCard(DevelopmentCard card, int position)
}

class Player {
	- String nickname
	- FaithTrack track
	- Warehouse warehouse
	- StrongBox strongbox
	- DevelopmentCardsSlots development_card_slots
	- ProductionBase base_production
	- Deck leader_cards_deck
}

class Game {
	- Player[] players
	- Market market
	- DevelopmentCardsOnTable development_cards_on_table
}

interface SoloActionTokenAbility {
	- void useAbility()
}

class DiscardDevelopmentCards {
	- DevelopmentCardsColor color
	- void useAbility()
}

class MoveBlackCrossTwoSpaces {
	- void useAbility()
}

class MoveBlackCrossOneSpace {
	- void useAbility()
}

class SoloActionToken {
	- SoloActionTokenAbility ability
}

class SingleGame {
	- SoloActionToken[] solo_action_tokens
	+ void shuffleSoloActionTokens()
}


/' RELATIONS DEFINITION '/

/' Cards relations '/
Card <|.. DevelopmentCard
Card <|.. LeaderCard
Deck -- Card
DevelopmentCard -- Resource
DevelopmentCard -- CardLevel
DevelopmentCard -- Production
DevelopmentCardsOnTable -- Deck
CardLevel -- DevelopmentCardsColor

/' Production relations '/
Production <|.. ProductionBase
Production <|.. ProductionAbility
Production -- Resource

/' LeaderCard relations '/
LeaderCard -- LeaderAbility
LeaderCard -- CardLevel
LeaderAbility <|.. ProductionAbility
LeaderAbility <|.. DiscountAbility
LeaderAbility <|.. ExtraSpaceAbility
LeaderAbility <|.. WhiteMarblesAbility
DiscountAbility -- Resource
ExtraSpaceAbility -- Resource
WhiteMarblesAbility -- Resource

/' Resource relations '/
Resource <|.. Coin
Resource <|.. Stone
Resource <|.. Servant
Resource <|.. Shield
Resource <|.. Faith
Resource -- ResourceColor

/' Market relations '/
Market -- Resource

/' FaithTrack relations '/
Cell -- VaticanReports
Tile -- VaticanReports
FaithTrack -- Cell
FaithTrack -- Tile
FaithTrack <|-- FaithTrackSinglePlayer

/' Personal board relations '/
Warehouse -- Resource
StrongBox -- Resource
DevelopmentCardsSlots -- DevelopmentCard

/' Player '/
Player -- FaithTrack 
Player -- Warehouse
Player -- StrongBox
Player -- DevelopmentCardsSlots
Player -- ProductionBase
Player -- Deck

/' Game '/
Game -- Player
Game -- Market
Game -- DevelopmentCardsOnTable

/' Solo game '/
Game <|-- SingleGame
SingleGame -- SoloActionToken
SoloActionToken -- SoloActionTokenAbility
SoloActionTokenAbility <|.. DiscardDevelopmentCards
SoloActionTokenAbility <|.. MoveBlackCrossTwoSpaces
SoloActionTokenAbility <|.. MoveBlackCrossOneSpace
DiscardDevelopmentCards -- DevelopmentCardsColor
@enduml
